@use "sass:color";
// Variables principales
$primary: #2b70f7;
$secondary: #6366f1;
$danger: #e53935;
$gray-100: #f8f9fa;
$gray-200: #f1f3f6;
$gray-400: #cbd5e1;
$gray-700: #374151;
$gray-900: #181a20;
$white: #fff;
$border-radius: 1rem;
$shadow: 0 8px 32px rgba(30, 30, 30, 0.18);

// Overlay
.analyzer-card-overlay {
  position: fixed;
  inset: 0;
  background: rgba(24, 26, 32, 0.55);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

// Card principale
.analyzer-card {
  width: 900px;
  max-width: 98vw;
  min-height: 480px;
  background: $white;
  border-radius: $border-radius;
  box-shadow: $shadow;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: fadeIn .35s cubic-bezier(.23,1.04,.73,.91);
}

// Header
.analyzer-card-header {
  background: $gray-100;
  border-bottom: 1px solid $gray-400;
  min-height: 56px;

  .analyzer-card-icon {
    font-size: 1.3rem;
  }
  .analyzer-card-title {
    color: $primary;
  }
  .analyzer-card-close {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.7rem;
    line-height: 1;
    transition: color .15s;
    &:hover {
      color: $danger;
    }
  }
  .analyzer-card-name {
    min-width: 160px;
    background: $white;
  }
}

// Main layout
.analyzer-card-content {
  display: flex;
  flex: 1 1 0;
  min-height: 400px;
}

// Builder colonne gauche
.analyzer-card-builder {
  background: $white;
  flex: 0 0 55%;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;

  section {
    margin-bottom: .2rem;

    label {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .flex {
      gap: .75rem;
    }
  }
  .tokenizer-params,
  .filter-params,
  .char-filter-params {
    margin-top: .25rem;
    gap: .5rem;
    input {
      min-width: 70px;
      font-size: .96em;
      padding: .18rem .6rem;
    }
  }
  .draggable {
    cursor: grab;
    &:active { cursor: grabbing; }
    .drag-handle {
      font-size: 1.15em;
      color: $gray-400;
    }
  }
  .filter-desc,
  .char-desc {
    margin-left: 0.7rem;
    color: $gray-400;
    font-size: .95em;
    font-style: italic;
  }
}

// Presets section
.preset-select {
  min-width: 150px;
  font-size: .97em;
}
.preset-save, .preset-delete {
  padding: .2rem .9rem;
  font-weight: 500;
  border-radius: .5rem;
  border: none;
  transition: background .13s;
  cursor: pointer;
}
.preset-save {
  background: $secondary;
  color: $white;
  &:hover { background: color.adjust($secondary, $lightness: -8%); }
}
.preset-delete {
  background: $danger;
  color: $white;
  &:hover { background: color.adjust($danger, $lightness: -8%); }
}

// Actions
.analyzer-card-actions {
  margin-top: auto;
  gap: .9rem;

  .btn {
    border: none;
    border-radius: .55rem;
    padding: .5rem 1.2rem;
    font-size: 1em;
    font-weight: 600;
    cursor: pointer;
    transition: background .13s, color .13s, box-shadow .13s;
    box-shadow: 0 1px 3px rgba(30,40,80,.09);
  }
  .btn-primary {
    background: $primary;
    color: $white;
    &:hover { background: color.adjust($primary, $lightness: -7%); }
  }
  .btn-secondary {
    background: $secondary;
    color: $white;
    &:hover { background: color.adjust($secondary, $lightness: -7%); }
  }
  .btn-light {
    background: $gray-200;
    color: $gray-700;
    &:hover { background: $gray-400; color: $gray-900;}
  }
}

// Preview colonne droite
.analyzer-card-preview {
  flex: 0 0 45%;
  background: $gray-100;
  border-left: 1px solid $gray-400;
  display: flex;
  flex-direction: column;
  gap: 1.4rem;

  section {
    margin-bottom: .2rem;
    label { font-weight: 600; }
  }
  .json-preview {
    background: $gray-900;
    color: #b9e2be;
    border-radius: .7rem;
    padding: .9rem .8rem;
    min-height: 100px;
    max-height: 180px;
    overflow: auto;
    font-size: .96em;
    font-family: "Fira Mono", "Consolas", "monospace";
    margin-bottom: .2rem;
  }
  .json-errors {
    color: $danger;
    font-size: .97em;
    font-weight: 500;
    margin-bottom: .2rem;
  }
  .btn-copy-json {
    background: $gray-400;
    color: $gray-900;
    padding: .2rem .8rem;
    border-radius: .4rem;
    border: none;
    font-size: .93em;
    cursor: pointer;
    &:hover { background: $gray-700; color: $white; }
  }
  .test-input {
    width: 100%;
    font-size: 1em;
    padding: .3rem .6rem;
  }
  .btn-test-analyzer {
    background: $primary;
    color: $white;
    border-radius: .5rem;
    padding: .28rem 1rem;
    font-size: .95em;
    border: none;
    font-weight: 500;
    cursor: pointer;
    &:hover { background: color.adjust($primary, $lightness: -9%);}
  }
  .test-result {
    min-height: 40px;
    background: $gray-100;
    border: 1px solid $gray-400;
    border-radius: .4rem;
    padding: .5rem .8rem;
    color: $gray-700;
    font-size: .98em;
    font-family: "Fira Mono", "Consolas", "monospace";
  }
}

// Responsive
@media (max-width: 1050px) {
  .analyzer-card { width: 98vw; min-width: 0;}
}
@media (max-width: 700px) {
  .analyzer-card-content {
    flex-direction: column;
  }
  .analyzer-card-builder,
  .analyzer-card-preview {
    flex: 1 1 0;
    width: 100%;
    border: none !important;
  }
  .analyzer-card {
    border-radius: 0.7rem;
    min-height: 320px;
  }
}

// Animations
@keyframes fadeIn {
  0% { opacity: 0; transform: scale(.93);}
  100% { opacity: 1; transform: scale(1);}
}
